Запуск (Main)
    1) Создание пула воркеров.
    2) Циклический поиск новых писем.
Event loop
    1) Проходим по всем поддиректориям maildir
    2) В каждой директории проверяем количество файлов в директории new
    3) Если файл нашли то идем в 3.1 иначе 4
        3.1) Проверяем есть ли данный файл в "заданиях" у воркеров. Если да, то 4 иначе дальше
        3.2) Парсим файл. Изымаем поле "TO"
        3.3) Из поле "TO" достаем символы от "@" до конца
        3.4) В таблице смотрим имя smtp сервера
        3.5) Создаем задание (имя файла, домен).
        3.6) Передаем это задание воркеру, который менее загружен или в последнем 10 заявках есть тот же домен, или первому в списке
        3.7) Переходим к 4
    4) Смотрим другие файлы (см п.3), если есть, иначе 5
    5) Ждем минуту
    6) переход к 1


Запуск воркера
    1) Создаем список заданий
    2) Ожидаем заданий
    3) Если задание нет то 2, иначе 4
    4) Помечаем первое задание как активное
    5) Помечаем все задания в списке как активные, у которых домен совпадает с 1 активным
    6) Инициализируем соединение
    7) Передаем список письм из списка активных заданий. 
    8) Каждое выполненое задание помечаем как выполненое
    9) после передачи всех писем, выполненые письма перемещаем в current
    